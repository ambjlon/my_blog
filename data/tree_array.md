　　数转数组的相关资料网上有很多，大部分人花些时间都能看懂的。这里写这篇博文只是帮助大家更快的理解树状数组的原理！  
　　树状数组维持的是两个一维数组（这里只讨论一维树状数组），A[i],C[i]。其中C[i]是根据A[i]构造出来的，C[i]中存的是A[i-2^k+1]+...+A[i]，这是2^k个数的和，k是i用二进制表示时末尾0的个数。也就是说C[i]中存的是A[i]向前数2^k个数的和（包括A[i]）。下面这个截图在很多资料中都能看到，它描述了C数组的构成。  
![](http://media.xtwind.com/images/2015/06/21/1cfdd617cf6fa5026f8f43d8c41cfdce.jpg)  
　　既然已经知道了C数组的构成，那么怎么计算A数组前i项的和sum（i）呢？看一个算例吧，我一直认为具体的算例更能解释一个算法，尤其是对于这类的算法！当然一些复杂的数值算法就必须用繁琐的数学公式才能阐述清楚。  
　　言归正传，计算sum（i）。怎么求sum（11）呢，11的二进制表示是1011，即11=2^0+2^1+2^3。  
A[11]  ==C[11]                          从第11个数向前数2^0个数，1011末尾有0个0  
\+  
A[10]+A[9]   == C[10]                      从第10个数向前数2^1个数，1010末尾有1个0  
\+  
A[8]+A[7]+A[6]+A[5]+A[4]+A[3]+A[2]+A[1]  ==C[8]       从第8个数向前数2^3个数，  1000末尾有3个0  

我们通过上面的三个步骤求出了sum（11）。  
总结一下，假设![](http://img.my.csdn.net/uploads/201301/17/1358354001_1636.jpg)，i写成二进制后总共t位，i_2(j)表示i写成二进制形式后第j位的值（0或1）.那么我们把A[1]到A[i]分段求和，段数是i的二进制形式中1的数目。
